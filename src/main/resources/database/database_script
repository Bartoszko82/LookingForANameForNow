DROP SCHEMA IF EXISTS `pointsDoMatter`;
CREATE SCHEMA `pointsDoMatter;

DROP TABLE IF EXISTS `game`;
CREATE TABLE `game` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(255) NOT NULL DEFAULT 'New Game',
`date` DATETIME NOT NULL DEFAULT SYSDATE(),
`game_type_id` int(11) NOT NULL,
`game_state` varchar(255) NOT NULL,
PRIMARY KEY (`id`),
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


DROP TABLE IF EXISTS `game_result`;
CREATE TABLE `game_result` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`user` int(11),
`team` int(11),  
`points` int(11) NOT NULL,
`game_id` int(11) NOT NULL, 
PRIMARY KEY (`id`),
CONSTRAINT `FK_RESULT_TO_GAME` FOREIGN KEY (`game_id`)
REFERENCES `game` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


DROP TABLE IF EXISTS `round`;
CREATE TABLE `round` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`name` varchar(255) NOT NULL DEFAULT 'Round',
`number_in_sequence` int(11) NOT NULL,
`game_id` int(11) NOT NULL, 
PRIMARY KEY (`id`),
CONSTRAINT `FK_ROUND_TO_GAME` FOREIGN KEY (`game_id`)
REFERENCES `game` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


DROP TABLE IF EXISTS `round_properties`;
CREATE TABLE `round_properties` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`kay` varchar(255) NOT NULL,
`value` varchar(255) NOT NULL,
`round_id` int(11) NOT NULL, 
PRIMARY KEY (`id`),
CONSTRAINT `FK_PROPS_TO_ROUND` FOREIGN KEY (`round_id`)
REFERENCES `round` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;